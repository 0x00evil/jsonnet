<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>Jsonnet documentation</title>
    <meta http-equiv="Content-type" content="text/html;charset=UTF-8" />
    <link rel="icon" type="image/png" href="favicon.png" />

    <link rel="stylesheet" href="prism.css" />
    <link rel="stylesheet" type="text/css" href="doc.css" />

    <script type="text/javascript"
      src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
    </script>

    <script type="text/javascript">
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-53570216-1', 'auto');
      ga('send', 'pageview');

    </script>

    <script src="prism.js" type="text/javascript">
    </script>

    <script type="text/javascript">
    Prism.languages.jsonnet = {
      'cppcomment': /\/\/.*/g,
      'comment': /\/\*[\w\W]*?\*\//g,
      'string': /("|')(\\?.)*?\1/g,
      'keyword': /\b(self|super)\b|\$/g,
      'boolean': /\b(true|false)\b/g,
      'constant': /\bnull\b/g,
      'error': /\berror\b/g,
      'special': /\b(local|function|if|then|else|import|for|in)\b/g,
      'number': /\b[0-9][0-9.eE]*\b/g,
      'operator': /(\+|\*|\/)+/g,
    };
    </script>

    <style type="text/css">
    .token.comment,
    .token.cppcomment {
      color: #040;
    }

    .token.identifier {
      color: #000;
    }
    .token.operator {
      color: #000;
    }

    .token.boolean,
    .token.number,
    .token.constant {
      color: #05a;
    }

    .token.string {
      color: #000048;
    }

    .token.keyword,
    .token.special {
      color: blue;
    }

    .token.error {
      color: red;
    }
    </style>

</head>

<body class="language-jsonnet">

<div class="header">

<div class="tagline"><i>The data templating language</i></div>
<div class="title">Jsonnet</div>

<div class="linkbar">
<a class="linkbarlink" href="index.html">Home</a> |
<a class="linkbarlink" href="tutorial.html">Tutorial</a> |
<a class="linkbarlink" href="demo.html">Demo</a> |
<a class="linkbarlink" href="stdlib.html">Library</a> |
<a class="linkbarlink" href="implementation.html">Implementation</a> |
<a class="linkbarlink" href="design.html">Design</a> |
<a class="linkbarlink" href="spec.html">Spec</a>
</div>

</div>

<script src="libjsonnet.js">
</script>

<div id=demo_box>

    <h1>Jsonnet Online Demo</h1>

    <h2>Jsonnet code</h2>

    <textarea id=jsonnet-code rows="15" cols="80">
local A = {
    x: 1,
    y: 2,
    z: self.x + 10
};
{
    f1: A { x: 3 },
    f2: A { y: 3 },
}
    </textarea>

    <div id=submit_box>
        <form onsubmit='compute(this); return false;'>
            <input id='compute_button' type='submit' value='Evaluate' >
        </form>
    </div>

    <h2>JSON Output</h2>

    <textarea id=json-output rows="15" cols="80">
    </textarea>

</div>


<script>
<!--
function jsonnet_evaluate_snippet_wrapped(code) {
    var jsonnet_delete = Module.cwrap('jsonnet_delete', 'number', ['number'])
    var jsonnet_evaluate_snippet = Module.cwrap('jsonnet_evaluate_snippet', 'number', ['string', 'string', 'number'])

    var error_ptr = Module._malloc(4);
    var output_ptr = jsonnet_evaluate_snippet("snippet", code, error_ptr);
    var result;
    if (output_ptr == 0) {
        var error = Module.getValue(error_ptr, 'i32*');
        result = Module.Pointer_stringify(error);
        jsonnet_delete(error);
    } else {
        result = Module.Pointer_stringify(output_ptr);
        jsonnet_delete(output_ptr);
    }
    Module._free(error_ptr);
    return result;
}
function compute() {
    var jsonnet_code = document.getElementById('jsonnet-code');
    var json_output = document.getElementById('json-output');
    json_output.innerHTML = jsonnet_evaluate_snippet_wrapped(jsonnet_code.value);
}
compute();
//-->
</script>

<div style="margin-bottom: 50px"></div>
<hr />
<p class="copyright">
Except as noted, this content is licensed under Creative Commons Attribution 2.5.
</p>
</body>

</html>